{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\watthachai\\\\OneDrive\\\\oop_python_kmitl\\\\frontend\\\\src\\\\components\\\\Table.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport ErrorMessage from \"./ErrorMessage\";\nimport moment from \"moment\";\nimport { UserContext } from \"../context/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Table = () => {\n  _s();\n  const [token, setToken] = useContext(UserContext);\n  const [series, setSeries] = useState([]);\n  const [activeModal, setActiveModal] = useState(false);\n  const [loaded, setLoaded] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [id, setId] = useState(null);\n  useEffect(() => {\n    getSeries();\n  }, []);\n  const getSeries = async () => {\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const response = await fetch(\"/api/series\", requestOptions);\n    if (!response.ok) {\n      setErrorMessage(\"Something went wrong. Couldn't load the Series\");\n    } else {\n      const data = await response.json();\n      setSeries(data);\n      setLoaded(true);\n    }\n  };\n  const handleModal = () => {\n    setActiveModal(!activeModal);\n    getLeads();\n    setId(null);\n  };\n  const handleLogout = () => {\n    setToken(null);\n  };\n  const handleUpdate = async id => {\n    setId(id);\n    setActiveModal(true);\n  };\n  const handleDelete = async id => {\n    const requestOptions = {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const response = await fetch(`/api/series/${id}`, requestOptions);\n    if (!response.ok) {\n      setErrorMessage(\"Failed to delete lead\");\n    }\n    getSeries();\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-center\",\n            children: \"Series Table\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-striped\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"SeriesID\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 77,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Title\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 78,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 79,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Date Released\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Cover Image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: loaded && series.map(series => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"row\",\n                  children: series.series_id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: series.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: series.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: moment(series.release_date).format('ll')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: series.cover_image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"button mr-2 is-info is-light\",\n                    onClick: () => handleUpdate(series.series_id),\n                    children: \"Update\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 93,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"button mr-2 is-danger is-light\",\n                    onClick: () => handleDelete(series.series_id),\n                    children: \"Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 99,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 41\n                }, this)]\n              }, series.series_id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), token && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        onClick: handleLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n_s(Table, \"D2ySA4sJREFWvrNpe99zWYUPBsw=\");\n_c = Table;\nexport default Table;\nvar _c;\n$RefreshReg$(_c, \"Table\");","map":{"version":3,"names":["React","useState","useEffect","useContext","ErrorMessage","moment","UserContext","jsxDEV","_jsxDEV","Fragment","_Fragment","Table","_s","token","setToken","series","setSeries","activeModal","setActiveModal","loaded","setLoaded","errorMessage","setErrorMessage","id","setId","getSeries","requestOptions","method","headers","response","fetch","ok","data","json","handleModal","getLeads","handleLogout","handleUpdate","handleDelete","children","className","fileName","_jsxFileName","lineNumber","columnNumber","scope","map","series_id","title","description","release_date","format","cover_image","onClick","_c","$RefreshReg$"],"sources":["C:/Users/watthachai/OneDrive/oop_python_kmitl/frontend/src/components/Table.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport ErrorMessage from \"./ErrorMessage\";\nimport moment from \"moment\";\nimport { UserContext } from \"../context/UserContext\";\n\n\nconst Table = () => {\n    const [token, setToken] = useContext(UserContext);\n    const [series, setSeries] = useState([]);\n    \n    const [activeModal, setActiveModal] = useState(false);\n    const [loaded, setLoaded] = useState(false);\n    const [errorMessage, setErrorMessage] = useState(\"\");\n    const [id, setId] = useState(null);\n\n    useEffect(() => {\n        getSeries();\n    }, []);\n\n        const getSeries = async () => {\n            const requestOptions = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n        };\n\n        const response = await fetch(\"/api/series\", requestOptions);\n        if (!response.ok) {\n            setErrorMessage(\"Something went wrong. Couldn't load the Series\");\n        } else {\n            const data = await response.json();\n            setSeries(data);\n            setLoaded(true);\n        }\n    };\n        const handleModal = () => {\n            setActiveModal(!activeModal);\n            getLeads();\n            setId(null);\n        };\n\n\n        const handleLogout = () => {\n            setToken(null);\n        };\n        const handleUpdate = async (id) => {\n            setId(id);\n            setActiveModal(true);\n        };\n        \n        const handleDelete = async (id) => {\n            const requestOptions = {\n            method: \"DELETE\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            };\n            const response = await fetch(`/api/series/${id}`, requestOptions);\n            if (!response.ok) {\n            setErrorMessage(\"Failed to delete lead\");\n            }\n        \n            getSeries();\n        };\n    \n\n    return (\n        <>\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col-12\">\n                        <h1 className=\"text-center\">Series Table</h1>\n                        <table className=\"table table-striped\">\n                            <thead>\n                                <tr>\n                                    <th scope=\"col\">SeriesID</th>\n                                    <th scope=\"col\">Title</th>\n                                    <th scope=\"col\">Description</th>\n                                    <th scope=\"col\">Date Released</th>\n                                    <th scope=\"col\">Cover Image</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {loaded && series.map((series) => (\n                                    <tr key={series.series_id}>\n                                        <th scope=\"row\">{series.series_id}</th>\n                                        <td>{series.title}</td>\n                                        <td>{series.description}</td>\n                                        <td>{moment(series.release_date).format('ll')}</td>\n                                        <td>{series.cover_image}</td>\n                                        <td>\n                                        <button\n                                            className=\"button mr-2 is-info is-light\"\n                                            onClick={() => handleUpdate(series.series_id)}\n                                        >\n                                            Update\n                                        </button>\n                                        <button\n                                            className=\"button mr-2 is-danger is-light\"\n                                            onClick={() => handleDelete(series.series_id)}\n                                        >\n                                            Delete\n                                        </button>\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n                {token && (\n                            <button className=\"button\" onClick={handleLogout}>\n                            Logout\n                            </button>\n                        )}        \n            </div>\n\n\n        </>\n    );\n};\n\nexport default Table;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}